<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content>
        <meta name="author" content>
        <title>Agam's Mashed-up Pome</title>
        <link href="http://fonts.googleapis.com/css?family=Source+Code+Pro|Radley:400,400italic" rel="stylesheet" type="text/css">
          <link rel="stylesheet" href="css/bootstrap.min.css" />
          <link rel="stylesheet" type="text/css" href="../css/syntax.css" />
          <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <script src="../js/google_analytics.js" type="text/javascript" charset="utf-8"></script>
  </head>
  <body>
  <div class="topbar">
  <div class="topbar-inner">
  <div class="container">
        <div id="navigation">
	<ul class="nav">
            <li><a href="../">Home</a></li>
            <li><a href="../about.html">About</a></li>
	</ul>
	</div>
        </div>
        </div>
        </div>

        <head>
<title>Appengine transition from Python to Go</title>
</head>
<body>
<h2>June 22, 2013</h2>
<br>

<p>Appengine transition from python to Go</p>
<p>Hadn’t updated this blog for a few months, and neither the “personal web site” that I had started earlier. So, to try something new, I decided to port that appengine site from python to go (looking at the Github logs, I haven’t updated that for 2 years !!)</p>
<p>The <code>app.yaml</code> is changed to get rid of all non-static handlers (which are now declared inside the <code>func init()</code> in the <code>.go</code> file. So the only handlers will be <code>/static</code>, <code>/robots.txt</code>, and <code>/.*</code>.</p>
<p>Both the <a href="https://developers.google.com/appengine/docs/go/">Appengine docs</a> as well as <a href="http://cuddle.googlecode.com/hg/talk/index.html">a couple</a> <a href="http://jan.newmarch.name/go/chinese/chapter-chinese.html">of examples</a> have basic bootstrapping information.</p>
<p>The first thing I did was to make a barebones “Hello World” index handler, and run it with</p>
<pre class="shell"><code>$ google_appengine/dev_appserver.py &lt;path to my app&gt;</code></pre>
<p>But I immediately got this error:</p>
<pre class="shell"><code>google.appengine.tools.devappserver2.wsgi_server.BindError: Unable to find a consistent port localhost
Exception in thread Thread-4 (most likely raised during interpreter shutdown):
Traceback (most recent call last):
  File &quot;/usr/lib/python2.7/threading.py&quot;, line 551, in __bootstrap_inner
  File &quot;/usr/lib/python2.7/threading.py&quot;, line 504, in run
  File &quot;/home/agam/Documents/Code/google_appengine/google/appengine/api/taskqueue/taskqueue_stub.py&quot;, line 2014, in MainLoop
  File &quot;/home/agam/Documents/Code/google_appengine/google/appengine/api/taskqueue/taskqueue_stub.py&quot;, line 2006, in _Wait
  File &quot;/usr/lib/python2.7/threading.py&quot;, line 403, in wait
  File &quot;/usr/lib/python2.7/threading.py&quot;, line 258, in wait
&lt;type 'exceptions.TypeError'&gt;: 'NoneType' object is not callable</code></pre>
<p>After some Googling and Stackoverflowing, I found a somewhat bizarre fix (to use <code>--api_port</code> argument) with the root cause identified as being duplicate <code>localhost</code> mappings in the <code>/etc/hosts</code> file, including ipv6 mappings to localhost. Now I don’t want to mess up my <code>/etc/hosts</code> with what is certainly a <em>bad idea</em>, so I used the <code>--api_port</code> option and I saw the ‘hello world’. So far, so good.</p>
<p>I had terrible fonts from long ago, and since Google Web Fonts has become pretty awesome since then, headed on over to pick a few custom fonts. Also realized that I really just need to keep the index page, since the custom blog that I started is really superseded by this one and the posterous feed tracker was obsolete some time ago.</p>
<p>The handler idea is quite straightforward, and there is definitely less boilerplate than what <code>index.py</code> was using earlier.</p>
<p>Initial stupid error: All requests were going to the same handler (including static css ones). Had to change url order in <code>app.yaml</code> to move the <code>/static</code> above the <code>/.*</code>.</p>
<p>Ok, all set, the barebones appengine site is up and running, I hope I can add some fun stuff to this in the future!</p>
</body>
<footer>
<div id="disqus_thread"></div>
<script src="../js/disqus.js" type="text/javascript" charset="utf-8"></script>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</footer>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
    </body>
    <footer>
	<br><br><br>
       This site generated using Hakyll
    </footer>
</html>
