
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Agam's Mashed-Up Pome</title>
	<meta name="author" content="Agam">

	
	<meta name="description" content="A lot of thinking about &ldquo;what&rsquo;s the best programming environment for beginners?&rdquo; has led me to the one system I&rsquo;ve never &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Agam's Mashed-Up Pome" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>

</head>


<body>
	<header id="header" class="inner"><h1><a href="/">Agam's Mashed-Up Pome</a></h1>
<!-- DebugAgam: Uncomment if necessary!
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:agam.github.io">
			</form>
		</div>
	</div>
</nav>
-->
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		<a class="google" href="https://plus.google.com/+AgamBrahma?rel=author" title="Google+">Google+</a>
		
		
		<a class="twitter" href="http://twitter.com/agambrahma" title="Twitter">Twitter</a>
		
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
        <!-- DebugAgam: uncomment if necessary!
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:agam.github.io">
	</form>
        -->
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/07/06/pharo/">
		
			Pharo</a>
	</h2>
	<div class="entry-content">
		<p>A lot of thinking about <em>&ldquo;what&rsquo;s the best programming environment for beginners?&rdquo;</em> has led me to the one system I&rsquo;ve never explored (and only read about): <strong>Smalltalk</strong> &mdash; Or more precisely, a particular open-source implementation of Smalltalk, <em>Pharo</em>.</p>

<p>(Clearly, I have very little credibility, since the pattern here is of me saying &ldquo;I&rsquo;m going to learn X&rdquo;, and they getting sidetracked by some Y)</p>

<p>Like Common Lisp (and unlike Scheme or Haskell), Smalltalk is &ldquo;image-based&rdquo; rather than &ldquo;source-file-based&rdquo;, and again like Lisp the <em>&ldquo;ideal&rdquo;</em> it strives for is turtles all the way down, the turtles here being uniform objects instead of uniform s-expressions.</p>

<p>When you start up the Pharo image for the first time after downloading it, one of windows is a <em>Workspace</em>, with various comments and notes, among which is the following innocuous looking line:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='smalltalk'><span class='line'><span class="nc">PharoTutorial</span> <span class="nf">go</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>Executing that line (selecting it and hitting <code>Cmd-D</code>, or right-clicking and selecting <code>Do It</code>) launches a engaging tutorial that &hellip; well .. you have to see it for yourself :) At the very end, you have the option of introspecting the tutorial itself, or creating your own. Here is a screenshot of that:</p>

<p><img src="https://farm1.staticflickr.com/551/19272356888_495113dfc2_b_d.jpg"></p>

<p>Download Pharo <a href="http://pharo.org/download">here</a>, and <strong>enjoy!!</strong></p>

<p>P.S. just for fun, some <em>&ldquo;Pharo Zen&rdquo;</em>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='smalltalk'><span class='line'><span class="nc">Perfection</span> <span class="nf">can</span> <span class="nf">kill</span> <span class="nf">movement</span><span class="p">.</span>
</span><span class='line'><span class="nc">Simple</span> <span class="nf">processes</span> <span class="nf">to</span> <span class="nf">support</span> <span class="nf">progress</span><span class="p">.</span>
</span><span class='line'><span class="nc">Examples</span> <span class="nf">to</span> <span class="nf">learn</span> <span class="nf">from</span><span class="p">.</span>
</span><span class='line'><span class="nc">Tests</span> <span class="nf">are</span> <span class="nf">important</span> <span class="nf">but</span> <span class="nf">can</span> <span class="nf">be</span> <span class="nf">changed</span><span class="p">.</span>
</span><span class='line'><span class="nc">Classes</span> <span class="nf">structure</span> <span class="nf">our</span> <span class="nf">vocabulary</span><span class="p">.</span>
</span><span class='line'><span class="nc">Fully</span> <span class="nf">dynamic</span> <span class="nf">and</span> <span class="nf">malleable</span><span class="p">.</span>
</span><span class='line'><span class="nc">A</span> <span class="nf">system</span> <span class="nf">with</span> <span class="nf">robust</span> <span class="nf">abstractions</span> <span class="nf">that</span> <span class="nf">a</span> <span class="nf">single</span> <span class="nf">person</span> <span class="nf">can</span> <span class="nf">understand</span><span class="p">.</span>
</span><span class='line'><span class="nc">Explicit</span> <span class="nf">is</span> <span class="nf">better</span> <span class="nf">than</span> <span class="nf">implicit</span><span class="p">.</span>
</span><span class='line'><span class="nc">Simplicity</span> <span class="nf">is</span> <span class="nf">the</span> <span class="nf">ultimate</span> <span class="nf">elegance</span><span class="p">.</span>
</span><span class='line'><span class="nc">Quality</span> <span class="nf">is</span> <span class="nf">an</span> <span class="nf">emerging</span> <span class="nf">property</span><span class="p">.</span>
</span><span class='line'><span class="nc">Polymorphism</span> <span class="nf">is</span> <span class="nf">our</span> <span class="nf">esperanto</span><span class="p">.</span>
</span><span class='line'><span class="nc">Messages</span> <span class="nf">are</span> <span class="nf">our</span> <span class="nf">vocabulary</span><span class="p">.</span>
</span><span class='line'><span class="nc">Better</span> <span class="nf">a</span> <span class="nf">set</span> <span class="nf">of</span> <span class="nf">small</span> <span class="nf">polymorphic</span> <span class="nf">classes</span> <span class="nf">than</span> <span class="nf">a</span> <span class="nf">large</span> <span class="nf">ugly</span> <span class="nf">one</span><span class="p">.</span>
</span><span class='line'><span class="nc">Communication</span> <span class="nf">is</span> <span class="nf">key</span><span class="p">.</span>
</span><span class='line'><span class="nc">Learning</span> <span class="nf">from</span> <span class="nf">mistakes</span><span class="p">.</span>
</span><span class='line'><span class="nc">Magic</span> <span class="nf">only</span> <span class="nf">at</span> <span class="nf">the</span> <span class="nf">right</span> <span class="nf">place</span><span class="p">.</span>
</span><span class='line'><span class="nc">Objects</span> <span class="nf">all</span> <span class="nf">the</span> <span class="nf">way</span> <span class="nf">down</span><span class="p">.</span>
</span><span class='line'><span class="nc">Abstraction</span> <span class="nf">and</span> <span class="nf">composition</span> <span class="nf">are</span> <span class="nf">our</span> <span class="nf">friends</span><span class="p">.</span>
</span><span class='line'><span class="nc">One</span> <span class="nf">step</span> <span class="nf">at</span> <span class="nf">a</span> <span class="nf">time</span><span class="p">.</span>
</span><span class='line'><span class="nc">There</span> <span class="nf">is</span> <span class="nf">no</span> <span class="nf">unimportant</span> <span class="nf">fix</span><span class="p">.</span>
</span><span class='line'><span class="nc">Easy</span> <span class="nf">to</span> <span class="nf">understand,</span> <span class="nv">easy</span> <span class="nf">to</span> <span class="nf">learn</span> <span class="nf">from,</span> <span class="nv">easy</span> <span class="nf">to</span> <span class="nf">change</span><span class="p">.</span>
</span><span class='line'><span class="nc">Beauty</span> <span class="nf">in</span> <span class="nf">the</span> <span class="nf">code,</span> <span class="nv">beauty</span> <span class="nf">in</span> <span class="nf">the</span> <span class="nf">comments</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-07-06T00:02:27-07:00" pubdate data-updated="true">Jul 6<sup>th</sup>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/pharo/'>pharo</a>, <a class='category' href='/blog/categories/smalltalk/'>smalltalk</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/06/12/freebsd-on-google-compute-engine/">
		
			FreeBSD on Google Compute Engine</a>
	</h2>
	<div class="entry-content">
		<p>I had tried running FreeBSD on Google Compute Engine previously, but <a href="blog/2014/12/14/trying-out-freebsd-and-failing-at-it/">given up</a>. Last week I was suddenly reminded of this, and after Googling around a bit, came across <a href="https://github.com/swills/FreeBSD-gcloud">this script</a> by Steve Wills <em>(Thanks, Steve!)</em> that automated the task of building a &ldquo;GCE-ready&rdquo; image on an existing FreeBSD system.</p>

<p>Hooray! No, wait, I <em>don&rsquo;t</em> have an existing FreeBSD system; that&rsquo;s sort of what this is all about. This minor despondency was short-lived, since I had temporarily forgotten how we now live with computers within computers within computers (give or take a layer). So I installed the <a href="http://www.vmware.com/products/workstation">VMWare Workstation</a>, downloaded <a href="ftp://ftp.freebsd.org/pub/FreeBSD/releases/amd64/amd64/ISO-IMAGES/10.1/">the iso</a> for <code>10.1-RELEASE</code>, and booted it up.</p>

<p>All you need is the Google Cloud SDK, which is available under the ports tree, so something like the following should suffice:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /usr/ports/net/google-cloud-sdk
</span><span class='line'><span class="nv">$ </span>make install
</span></code></pre></td></tr></table></div></figure>


<p>Then grab the script and run it.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>curl https://raw.githubusercontent.com/swills/FreeBSD-gcloud/master/build_google_image.sh &gt; /tmp/swill-script.sh
</span><span class='line'><span class="nv">$ </span>chmod a+x /tmp/swill-script.sh
</span><span class='line'><span class="nv">$ </span>/tmp/swill-script.sh
</span><span class='line'>components
</span><span class='line'>base.txz                                      100% of   <span class="m">63</span> MB <span class="m">7041</span> kBps 00m09s
</span><span class='line'>kernel.txz                                    100% of   <span class="m">84</span> MB <span class="m">3187</span> kBps 00m27s
</span><span class='line'>Creating image
</span><span class='line'>Creating filesystem
</span><span class='line'>Installing base into image
</span><span class='line'>Installing kernel into image
</span><span class='line'>Setting up image
</span><span class='line'>Finishing image
</span><span class='line'>Creating partitioned file
</span><span class='line'>Creating image tar
</span><span class='line'>Now run:
</span><span class='line'>
</span><span class='line'>gcloud auth login
</span><span class='line'>gsutil cp FreeBSD-10.1-RELEASE-amd64-20150612191810.tar.gz gs://swills-test-bucket
</span><span class='line'>gcutil addimage freebsd-101-release-amd64-20150612191810 gs://swills-test-bucket/FreeBSD-10.1-RELEASE-amd64-20150612191810.tar.gz
</span></code></pre></td></tr></table></div></figure>


<p>As you might have noticed, the script ends with a helpful suggestion for the subsequent commands to run. Caveats:</p>

<ul>
<li>If you&rsquo;re doing all this within a VM like I was, you&rsquo;ll want to run <code>gcloud auth login --no-launch-browser</code></li>
<li>You might need to run <code>gcloud config set project &lt;project ID&gt;</code> (that&rsquo;s project <em>ID</em>, not project <em>name</em>)</li>
<li>(obviously) replace <code>swills-test-bucket</code> with your bucket (you can create one at the <a href="https://console.developers.google.com">cloud console</a> (Storage &ndash;> Cloud Storage &ndash;> Storage Browser)</li>
</ul>


<p>After this, a few clicks should get you a new instance (remember to select the custom image uploaded earlier), and SSHing into it should show you <code>/etc/motd</code> (which is still a plain old file, and not, you know, <a href="https://web.archive.org/web/20120107210839/http://deadmemes.net/2010/10/19/fear-and-loathing-in-debianubuntu-or-who-needs-etcmotd">this abomination</a>).</p>

<p><strong>Enjoy!</strong></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-06-12T22:31:14-07:00" pubdate data-updated="true">Jun 12<sup>th</sup>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/freebsd/'>freebsd</a>, <a class='category' href='/blog/categories/gce/'>gce</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/06/09/trying-out-stack-dot-dot-dot/">
		
			Trying Out Stack &#8230;</a>
	</h2>
	<div class="entry-content">
		<p>Tried this out after <a href="https://www.fpcomplete.com/blog/2015/06/announcing-first-public-beta-stack">I read about it</a>. Note: the following was all done on a Macbook, but it should work similarly on Linux too.</p>

<p><strong>Get Stack</strong></p>

<p><a href="https://github.com/fpco/stack/releases/download/v0.0.0-beta/stack-0.0.0-x86_64-osx.gz">Download</a> it.</p>

<p><code>gunzip</code> and copy to some directory in <code>$PATH</code></p>

<p><strong>Use Stack</strong></p>

<p>Create dummy <code>.hs</code> file.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='haskell'><span class='line'><span class="nf">main</span> <span class="ow">=</span> <span class="n">putStrLn</span> <span class="s">&quot;Hello World&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p><em>Digression: first build</em></p>

<p>You need <code>GHC</code> installed, and a file called <code>stack.yaml</code> in the local directory. But if you don&rsquo;t, no problem.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>stack ghc dummy.hs
</span><span class='line'>No .cabal file found in directory /Users/agam/Documents/Haskell/Dummy/
</span><span class='line'>Writing default config file to: /Users/agam/Documents/Haskell/Dummy/stack.yaml
</span><span class='line'>Downloading lts-2.13 build plan ...
</span><span class='line'>Downloaded lts-2.13 build plan.
</span><span class='line'>Populating index cache, may take a moment ...
</span><span class='line'>Updating package index hackage.haskell.org ...
</span><span class='line'>Cloning package index ...
</span><span class='line'>Done populating index cache.
</span><span class='line'>Downloading ghc-7.8.4 ...
</span><span class='line'>Downloaded ghc-7.8.4.
</span><span class='line'>Unpacking GHC ...
</span><span class='line'>Configuring GHC ...
</span><span class='line'>Installing GHC ...
</span><span class='line'>GHC installed.
</span></code></pre></td></tr></table></div></figure>


<p>Run it once more to actually build it.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>stack ghc dummy.hs
</span><span class='line'><span class="o">[</span><span class="m">1</span> of 1<span class="o">]</span> Compiling Main             <span class="o">(</span> dummy.hs, dummy.o <span class="o">)</span>
</span><span class='line'>Linking dummy ...
</span><span class='line'><span class="nv">$ </span>ls
</span><span class='line'>stack.yaml dummy.o dummy.hs dummy.hi dummy
</span></code></pre></td></tr></table></div></figure>


<p><strong>Run the program</strong></p>

<p>Just run the executable created:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>./dummy
</span><span class='line'>Hello World
</span></code></pre></td></tr></table></div></figure>


<p>Alternatively, combine steps 4 and 5</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>stack runghc dummy.hs
</span><span class='line'>Hello World
</span></code></pre></td></tr></table></div></figure>


<p><strong>Libraries</strong></p>

<p>(this is why we&rsquo;re <em>really</em> here, right?)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>stack update
</span><span class='line'>Updating package index hackage.haskell.org ...
</span></code></pre></td></tr></table></div></figure>


<p>What packages do we have ?</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>stack <span class="nb">exec</span> -- ghc-pkg list
</span><span class='line'>/Users/agam/.stack/programs/x86_64-osx/ghc-7.8.4/lib/ghc-7.8.4/package.conf.d/
</span><span class='line'>Cabal-1.18.1.5
</span><span class='line'>array-0.5.0.0
</span><span class='line'>base-4.7.0.2
</span><span class='line'>bin-package-db-0.0.0.0
</span><span class='line'>binary-0.7.1.0
</span><span class='line'>bytestring-0.10.4.0
</span><span class='line'>containers-0.5.5.1
</span><span class='line'>deepseq-1.3.0.2
</span><span class='line'>directory-1.2.1.0
</span><span class='line'>filepath-1.3.0.2
</span><span class='line'>ghc-7.8.4
</span><span class='line'>ghc-prim-0.3.1.0
</span><span class='line'>haskeline-0.7.1.2
</span><span class='line'>haskell2010-1.1.2.0
</span><span class='line'>haskell98-2.0.0.3
</span><span class='line'>hoopl-3.10.0.1
</span><span class='line'>hpc-0.6.0.1
</span><span class='line'>integer-gmp-0.5.1.0
</span><span class='line'>old-locale-1.0.0.6
</span><span class='line'>old-time-1.1.0.2
</span><span class='line'>pretty-1.1.1.1
</span><span class='line'>process-1.2.0.0
</span><span class='line'>rts-1.0
</span><span class='line'>template-haskell-2.9.0.0
</span><span class='line'>terminfo-0.4.0.0
</span><span class='line'><span class="nb">time</span>-1.4.2
</span><span class='line'>transformers-0.3.0.0
</span><span class='line'>unix-2.7.0.1
</span><span class='line'>xhtml-3000.2.1
</span></code></pre></td></tr></table></div></figure>


<p><strong>Get a new package using Stack</strong></p>

<p>First, we need to <em>require</em> some new package. Change dummy code to (e.g.)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='haskell'><span class='line'><span class="kr">import</span> <span class="nn">System.Random</span>
</span><span class='line'><span class="kr">import</span> <span class="nn">Control.Monad</span> <span class="p">(</span><span class="nf">replicateM</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="nf">main</span> <span class="ow">=</span> <span class="n">replicateM</span> <span class="mi">10</span> <span class="p">(</span><span class="n">randomIO</span> <span class="ow">::</span> <span class="kt">IO</span> <span class="kt">Float</span><span class="p">)</span> <span class="o">&gt;&gt;=</span> <span class="n">print</span>
</span></code></pre></td></tr></table></div></figure>


<p>Try to build it</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>stack ghc dummy.hs
</span><span class='line'>
</span><span class='line'>dummy.hs:1:8:
</span><span class='line'>Could not find module ‘System.Random’
</span><span class='line'>Use -v to see a list of the files searched <span class="k">for</span>.
</span></code></pre></td></tr></table></div></figure>


<p>So let&rsquo;s get it then:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>stack deps random
</span><span class='line'>random-1.1: downloading
</span><span class='line'>random-1.1: configure
</span><span class='line'>random-1.1: build
</span><span class='line'>random-1.1: install
</span></code></pre></td></tr></table></div></figure>


<p>&hellip; and then run it again:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>stack ghc dummy.hs
</span><span class='line'><span class="o">[</span><span class="m">1</span> of 1<span class="o">]</span> Compiling Main             <span class="o">(</span> dummy.hs, dummy.o <span class="o">)</span>
</span><span class='line'>Linking dummy ...
</span><span class='line'><span class="nv">$ </span>./dummy
</span><span class='line'><span class="o">[</span>0.4301154,0.9796305,4.801333e-2,0.6978437,0.45780963,0.21923387,0.33110678,0.2976914,5.8295727e-3,0.28221375<span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Not bad at all. Reminds me of the feeling I got after wading through the plethora of python package handling frameworks and discovering Anaconda. This is <em>finally</em> a newbie-friendly language; &ldquo;cabal hell&rdquo; is no more (!)</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-06-09T22:01:24-07:00" pubdate data-updated="true">Jun 9<sup>th</sup>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/haskell/'>haskell</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/06/05/freebsd-and-linux-install-paths/">
		
			FreeBSD and Linux: Install Paths</a>
	</h2>
	<div class="entry-content">
		<p>One of those <strong>WTF</strong> moments of unexplainable distro choices. This on an ubuntu box:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>which netcat
</span><span class='line'>/bin/netcat
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>ls -l /bin/netcat
</span><span class='line'>lrwxrwxrwx <span class="m">1</span> root root <span class="m">24</span> Oct <span class="m">14</span>  <span class="m">2013</span> /bin/netcat -&gt; /etc/alternatives/netcat
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>ls -l /etc/alternatives/netcat
</span><span class='line'>lrwxrwxrwx <span class="m">1</span> root root <span class="m">15</span> Oct <span class="m">14</span>  <span class="m">2013</span> /etc/alternatives/netcat -&gt; /bin/nc.openbsd
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>which nc
</span><span class='line'>/usr/bin/nc
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>ls -l /usr/bin/nc
</span><span class='line'>lrwxrwxrwx <span class="m">1</span> root root <span class="m">7</span> Jun  <span class="m">4</span>  <span class="m">2014</span> /usr/bin/nc -&gt; /bin/nc
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>ls -l /bin/nc
</span><span class='line'>lrwxrwxrwx <span class="m">1</span> root root <span class="m">20</span> Oct <span class="m">14</span>  <span class="m">2013</span> /bin/nc -&gt; /etc/alternatives/nc
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>ls -l /etc/alternatives/nc
</span><span class='line'>lrwxrwxrwx <span class="m">1</span> root root <span class="m">15</span> Oct <span class="m">14</span>  <span class="m">2013</span> /etc/alternatives/nc -&gt; /bin/nc.openbsd
</span></code></pre></td></tr></table></div></figure>


<p>&hellip; whereas on FreeBSD:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>% ls -l /usr/bin/nc
</span><span class='line'>-r-xr-xr-x  <span class="m">1</span> root  wheel  <span class="m">28008</span> Nov <span class="m">11</span>  <span class="m">2014</span> /usr/bin/nc
</span><span class='line'>
</span><span class='line'>% file /usr/bin/nc
</span><span class='line'>/usr/bin/nc: ELF 64-bit LSB executable, x86-64, version <span class="m">1</span> <span class="o">(</span>FreeBSD<span class="o">)</span>, dynamically linked <span class="o">(</span>uses shared libs<span class="o">)</span>, <span class="k">for</span> FreeBSD 10.1, stripped
</span></code></pre></td></tr></table></div></figure>


<p>Which would you rather remember?</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-06-05T19:46:45-07:00" pubdate data-updated="true">Jun 5<sup>th</sup>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/freebsd/'>freebsd</a>, <a class='category' href='/blog/categories/linux/'>linux</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/06/01/a-counterpoint-to-rms-on-lisp-machines/">
		
			A Counterpoint to RMS on Lisp Machines</a>
	</h2>
	<div class="entry-content">
		<p>You might have come across Richard Stallman&rsquo;s <a href="http://www.gnu.org/gnu/rms-lisp.html">brief history of Lisp Machines</a>, which was a speech he gave in 2002. I remember coming across it &mdash; being inspired by what inspired him, and being outraged at what outraged him.</p>

<p>Lately, I&rsquo;m souring on the whole <em>romantic</em> view of the &ldquo;free software&rdquo; that I&rsquo;d held for about a decade, a distinctly &ldquo;NoGPL&rdquo; view, if I may coin that word. Another nail in the coffin was delivered by <a href="https://web.archive.org/web/20090901115039/http://danweinreb.org/blog/rebuttal-to-stallmans-story-about-the-formation-of-symbolics-and-lmi">this blog post</a> <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>, which refutes much of the blame to Symbolics, and leaves Stallman looking IMO quite silly (if not petulant).</p>

<p>Also &hellip;</p>

<blockquote><p>And while I’m setting the record straight, the original (TECO-based) Emacs was created and designed by Guy L. Steele Jr. and David Moon. <strong>After they had it working, and it had become established as the standard text editor at the AI lab, Stallman took over its maintenance.</strong></p></blockquote>

<p>&hellip; so much for RMS&rsquo;s <em>&ldquo;But, along the way, I wrote a text editor, Emacs &hellip;&rdquo;</em>.</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>The blog no longer exists (and sadly, Mr. Weinreb passed away in 2012), but thanks to <a href="https://archive.org/">archive.org</a>, it&rsquo;ll stay around.<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
</ol>
</div>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-06-01T21:48:09-07:00" pubdate data-updated="true">Jun 1<sup>st</sup>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/commentary/'>commentary</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/05/29/project-euler-and-learning-programming/">
		
			Moving on From Project Euler</a>
	</h2>
	<div class="entry-content">
		<p>I started doing Project Euler problems occasionally with the assumption that it was a good way to either (1) learn a new language, or (2) as a healthy way to keep practicing programming. It turns out, however, that what I <em>really</em> end up doing is &ldquo;brute-forcing&rdquo; problems that are really <em>math</em> problems.</p>

<p>So while I really should continue, I should do so by learning more math, instead of banging away at bad implementations. When I looked around for options for these, I realized that (as in so many other things) we&rsquo;re spoilt for choice! Options abound, ranging from the &ldquo;Daily Programmer&rdquo; <a href="https://www.reddit.com/r/dailyprogrammer">subreddit</a>, to dedicated (<em>free!</em>) practice sites like <a href="https://www.codeeval.com/">CodeEval</a>, <a href="https://www.hackerrank.com/">HackerRank</a>, or <a href="http://coderbyte.com/">CoderByte</a>.</p>

<p>Eventually I just picked one at random and decided to start doing roughly one problem a day (I picked <a href="https://www.hackerrank.com/">CodeWars</a>, which has an amusing &ldquo;dojo&rdquo; feel to it). We&rsquo;ll see how long it lasts :)</p>

<p><strong>Edit</strong>: There is a bigger list of &ldquo;coding challenge&rdquo; sites <a href="http://codecondo.com/coding-challenges/">here</a>.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-05-29T12:37:07-07:00" pubdate data-updated="true">May 29<sup>th</sup>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/projecteuler/'>projecteuler</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/05/29/euler-50-consecutive-prime-sum/">
		
			Euler 50: Consecutive Prime Sum</a>
	</h2>
	<div class="entry-content">
		<p>I had posted a grotesque non-working solution to this <a href="/blog/2015/05/17/euler-50-a-non-working-solution/">previously</a>, so here is a grotesque <em>working</em> solution.</p>

<p>Yes, it uses global variables and old-fashioned extra book-keeping, and the <code>main</code> function is just a step-wise procedural function, but it <em>works</em> and it&rsquo;s <em>correct</em>, so I&rsquo;m going to leave it as is.</p>

<p><strong>Statutory warning</strong>: <em>Spoilers ahead</em></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
</pre></td><td class='code'><pre><code class='go'><span class='line'><span class="kd">const</span> <span class="nx">MAX_NUM</span> <span class="p">=</span> <span class="mi">1000000</span>
</span><span class='line'>
</span><span class='line'><span class="kd">type</span> <span class="nx">Number</span> <span class="kd">struct</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">isPrime</span>              <span class="kt">bool</span>
</span><span class='line'>  <span class="nx">maxPrimeSum</span>          <span class="kt">int</span>
</span><span class='line'>  <span class="nx">maxConsecutivePrimes</span> <span class="kt">int</span>
</span><span class='line'>  <span class="nx">previousPrimeIndex</span>   <span class="kt">int</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Oh noez! A _global_ variable!</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">numbers</span> <span class="p">[]</span><span class="nx">Number</span>
</span><span class='line'>
</span><span class='line'><span class="kd">func</span> <span class="nx">markMultiples</span><span class="p">(</span><span class="nx">p</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">for</span> <span class="nx">n</span> <span class="o">:=</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">p</span><span class="p">;</span> <span class="nx">n</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">numbers</span><span class="p">);</span> <span class="nx">n</span> <span class="o">+=</span> <span class="nx">p</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">numbers</span><span class="p">[</span><span class="nx">n</span><span class="p">].</span><span class="nx">isPrime</span> <span class="p">=</span> <span class="kc">false</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">func</span> <span class="nx">populatePrimes</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// First mark all numbers as prime</span>
</span><span class='line'>  <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">numbers</span><span class="p">);</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">numbers</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">isPrime</span> <span class="p">=</span> <span class="kc">true</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// Bootstrap our loop with the first prime, 2</span>
</span><span class='line'>  <span class="nx">numbers</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">isPrime</span> <span class="p">=</span> <span class="kc">false</span>
</span><span class='line'>  <span class="nx">numbers</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">isPrime</span> <span class="p">=</span> <span class="kc">false</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">prevPrime</span> <span class="o">:=</span> <span class="mi">2</span>
</span><span class='line'>  <span class="nx">numbers</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">isPrime</span> <span class="p">=</span> <span class="kc">true</span>
</span><span class='line'>  <span class="nx">numbers</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">previousPrimeIndex</span> <span class="p">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// Straightforward sieve</span>
</span><span class='line'>  <span class="nx">markMultiples</span><span class="p">(</span><span class="nx">prevPrime</span><span class="p">)</span>
</span><span class='line'>  <span class="k">for</span> <span class="nx">p</span> <span class="o">:=</span> <span class="mi">3</span><span class="p">;</span> <span class="nx">p</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">numbers</span><span class="p">);</span> <span class="nx">p</span><span class="o">++</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="nx">numbers</span><span class="p">[</span><span class="nx">p</span><span class="p">].</span><span class="nx">isPrime</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">numbers</span><span class="p">[</span><span class="nx">p</span><span class="p">].</span><span class="nx">previousPrimeIndex</span> <span class="p">=</span> <span class="nx">prevPrime</span>
</span><span class='line'>          <span class="nx">prevPrime</span> <span class="p">=</span> <span class="nx">p</span>
</span><span class='line'>          <span class="nx">markMultiples</span><span class="p">(</span><span class="nx">prevPrime</span><span class="p">)</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">func</span> <span class="nx">calculatePrimeSums</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// Initialize first prime, then move out from there</span>
</span><span class='line'>  <span class="nx">numbers</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">maxPrimeSum</span> <span class="p">=</span> <span class="mi">2</span>
</span><span class='line'>  <span class="nx">numbers</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">maxConsecutivePrimes</span> <span class="p">=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// As an upper limit for sums, what&#39;s the largest prime we have?</span>
</span><span class='line'>  <span class="nx">largestPrime</span> <span class="o">:=</span> <span class="nx">MAX_NUM</span>
</span><span class='line'>  <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="nx">MAX_NUM</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="nx">numbers</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">isPrime</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">largestPrime</span> <span class="p">=</span> <span class="nx">i</span>
</span><span class='line'>          <span class="k">break</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;The largest possible prime to sum to is : &quot;</span><span class="p">,</span> <span class="nx">largestPrime</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">3</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">numbers</span><span class="p">);</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">!</span><span class="nx">numbers</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">isPrime</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">continue</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">sum</span> <span class="o">:=</span> <span class="mi">0</span>
</span><span class='line'>      <span class="nx">numPrimesTried</span> <span class="o">:=</span> <span class="mi">0</span>
</span><span class='line'>      <span class="nx">lastPrimeSum</span> <span class="o">:=</span> <span class="mi">0</span>
</span><span class='line'>      <span class="nx">numPrimesInSum</span> <span class="o">:=</span> <span class="mi">0</span>
</span><span class='line'>      <span class="c1">// Go back through the sequence of primes, until the</span>
</span><span class='line'>      <span class="c1">// sum goes past the largest possible prime. Store the</span>
</span><span class='line'>      <span class="c1">// last sum reached that _was_ a prime, and the number</span>
</span><span class='line'>      <span class="c1">// of primes involved.</span>
</span><span class='line'>      <span class="k">for</span> <span class="nx">p</span> <span class="o">:=</span> <span class="nx">i</span><span class="p">;</span> <span class="nx">p</span> <span class="p">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">p</span> <span class="p">=</span> <span class="nx">numbers</span><span class="p">[</span><span class="nx">p</span><span class="p">].</span><span class="nx">previousPrimeIndex</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">!</span><span class="nx">numbers</span><span class="p">[</span><span class="nx">p</span><span class="p">].</span><span class="nx">isPrime</span> <span class="p">{</span>
</span><span class='line'>              <span class="nb">panic</span><span class="p">(</span><span class="s">&quot;wtf&quot;</span><span class="p">)</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="nx">sum</span> <span class="o">+=</span> <span class="nx">p</span>
</span><span class='line'>          <span class="nx">numPrimesTried</span><span class="o">++</span>
</span><span class='line'>          <span class="k">if</span> <span class="nx">sum</span> <span class="p">&gt;</span> <span class="nx">largestPrime</span> <span class="p">{</span>
</span><span class='line'>              <span class="c1">// Don&#39;t try any more primes!</span>
</span><span class='line'>              <span class="k">break</span>
</span><span class='line'>          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="c1">// Book keeping</span>
</span><span class='line'>              <span class="k">if</span> <span class="nx">numbers</span><span class="p">[</span><span class="nx">sum</span><span class="p">].</span><span class="nx">isPrime</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">lastPrimeSum</span> <span class="p">=</span> <span class="nx">sum</span>
</span><span class='line'>                  <span class="nx">numPrimesInSum</span> <span class="p">=</span> <span class="nx">numPrimesTried</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="nx">numbers</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">maxPrimeSum</span> <span class="p">=</span> <span class="nx">lastPrimeSum</span>
</span><span class='line'>      <span class="nx">numbers</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">maxConsecutivePrimes</span> <span class="p">=</span> <span class="nx">numPrimesInSum</span>
</span><span class='line'>      <span class="c1">//     fmt.Println(&quot;max prime sum for &quot;, i, &quot; = &quot;, numbers[i].maxPrimeSum)</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">func</span> <span class="nx">findMaxPrimeSum</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// Use the pre-calculated primes sums to figure out the maximum and print some summary info</span>
</span><span class='line'>  <span class="nx">maxConsecutivePrimes</span> <span class="o">:=</span> <span class="mi">0</span>
</span><span class='line'>  <span class="nx">maxPrimeSum</span> <span class="o">:=</span> <span class="mi">0</span>
</span><span class='line'>  <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">MAX_NUM</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="nx">numbers</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">isPrime</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span> <span class="nx">numbers</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">maxConsecutivePrimes</span> <span class="p">&gt;</span> <span class="nx">maxConsecutivePrimes</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">maxConsecutivePrimes</span> <span class="p">=</span> <span class="nx">numbers</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">maxConsecutivePrimes</span>
</span><span class='line'>              <span class="nx">maxPrimeSum</span> <span class="p">=</span> <span class="nx">numbers</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">maxPrimeSum</span>
</span><span class='line'>              <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;max prime sum = &quot;</span><span class="p">,</span> <span class="nx">maxPrimeSum</span><span class="p">,</span> <span class="s">&quot;, with &quot;</span><span class="p">,</span> <span class="nx">maxConsecutivePrimes</span><span class="p">,</span> <span class="s">&quot; primes, ending in &quot;</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">numbers</span> <span class="p">=</span> <span class="nb">make</span><span class="p">([]</span><span class="nx">Number</span><span class="p">,</span> <span class="nx">MAX_NUM</span><span class="p">)</span>
</span><span class='line'>  <span class="nx">populatePrimes</span><span class="p">()</span>
</span><span class='line'>  <span class="nx">calculatePrimeSums</span><span class="p">()</span>
</span><span class='line'>  <span class="nx">findMaxPrimeSum</span><span class="p">()</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The best part? It ran in <code>0.363 seconds</code>!</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-05-29T12:24:32-07:00" pubdate data-updated="true">May 29<sup>th</sup>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/golang/'>golang</a>, <a class='category' href='/blog/categories/projecteuler/'>projecteuler</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/05/17/on-the-internet-of-thing-like-things-dot-dot-dot/">
		
			On the Internet of Thing-like-things &#8230;</a>
	</h2>
	<div class="entry-content">
		<p>Went to Maker Faire, had my mind blown <em>(as usual)</em>, and then came across this quote<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> by Cory Doctorow:</p>

<blockquote><p>So today we have marketing departments who say things like ‘[…] Make me a computer that doesn’t run every program, just a program that does this specialized task, like streaming audio, or routing packets, or playing Xbox games’ […] But that’s not what we do when we turn a computer into an appliance. We’re not making a computer that runs only the “appliance” app; we’re making a computer that can run every program, but which uses some combination of rootkits, spyware, and code-signing to prevent the user from knowing which processes are running, from installing her own software, and from terminating processes that she doesn’t want. <strong>In other words, an appliance is not a stripped-down computer — it is a fully functional computer with spyware on it out of the box.</strong></p></blockquote>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>28th Chaos Communication Congress in Berlin (<a href="https://www.youtube.com/watch?v=HUEvRyemKSg&amp;feature=youtu.be">Youtube link</a>)<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
</ol>
</div>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-05-17T00:16:24-07:00" pubdate data-updated="true">May 17<sup>th</sup>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/making/'>making</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/05/16/you-say-incidental/">
		
			You Say Incidental, I Say Accidental &#8230;</a>
	</h2>
	<div class="entry-content">
		<p>Completely out of context, but it makes a point. Well, <em>some</em> point.</p>

<blockquote><p>Immutant is an integrated suite of Clojure libraries backed by Undertow for web, HornetQ for messaging, Infinispan for caching, Quartz for scheduling, and Narayana for transactions. Applications built with Immutant can optionally be deployed to a WildFly cluster for enhanced features. Its fundamental goal is to reduce the inherent incidental complexity in real world applications.</p></blockquote>

<p>Now, to be fair, it&rsquo;s taken out of <a href="http://immutant.org/news/2015/04/17/announcing-2-final/#What_is_Immutant?">the announcement of a good piece of open-source software</a>, but it&rsquo;s hard to read that last line and not feel like it&rsquo;s the punch line of a bad joke. My reaction is summed up by the first (Disqus) comment: <em>&ldquo;Congrats! I can&rsquo;t wait to find something to do with this. ;)&rdquo;</em>.</p>

<p>You can imagine a sort of automatic generator, that can spit out stuff like this:</p>

<blockquote><p>FooMeister is an integrated suite of HipsterLang libraries backed by SuperBar for web, WooHoo for messaging, YellowDamn for cachine, RedFever for scheduling, and OrangeMayhem for transactions. Applications build with FooMeister can optionally be deployed to a Brouhaha cluster for enhanced features. Its fundamental goal is to reduce the inherent incidental complexity in real world applications.</p></blockquote>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-05-16T20:02:15-07:00" pubdate data-updated="true">May 16<sup>th</sup>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/complexity/'>complexity</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/05/16/euler-50-a-non-working-solution/">
		
			Euler 50: A Non-working Solution</a>
	</h2>
	<div class="entry-content">
		<p>It&rsquo;s worth pointing out things that don&rsquo;t work, roads that lead to dead ends, etc &mdash; so here is a brute force solution that has absolutely no chance of ever working. It&rsquo;s long and verbose because it&rsquo;s a <em>franken-solution</em>, made out of parts of previous solution concatenated together into a terrible mess. Posting it here before I destroy it. The forlorn <code>TODO</code> at the end proved over-optimistic &hellip;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
</pre></td><td class='code'><pre><code class='c++'><span class='line'><span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">kMaxNum</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">PopulatePrimes</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;*</span> <span class="n">numbers</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;*</span> <span class="n">prime_indices</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// Start off with all numbers marked prime.</span>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">numbers</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">numbers</span><span class="o">-&gt;</span><span class="n">at</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">int</span> <span class="n">prime_index</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</span><span class='line'>  <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// Store the prime index for future reference</span>
</span><span class='line'>    <span class="n">prime_indices</span><span class="o">-&gt;</span><span class="n">push_back</span><span class="p">(</span><span class="n">prime_index</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">numbers</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">prime_index</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Mark the multiples as not prime</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">prime_index</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">numbers</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span> <span class="o">+=</span> <span class="n">prime_index</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">numbers</span><span class="o">-&gt;</span><span class="n">at</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Repeat with the next prime number</span>
</span><span class='line'>    <span class="k">do</span> <span class="p">{</span>
</span><span class='line'>      <span class="o">++</span><span class="n">prime_index</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">prime_index</span> <span class="o">&lt;</span> <span class="n">numbers</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">numbers</span><span class="o">-&gt;</span><span class="n">at</span><span class="p">(</span><span class="n">prime_index</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">prime_index</span> <span class="o">==</span> <span class="n">numbers</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">())</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">sanity_check_primes</span><span class="p">(</span><span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;&amp;</span> <span class="n">numbers</span><span class="p">,</span>
</span><span class='line'>                         <span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">prime_indices</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">auto</span> <span class="n">check_prime</span> <span class="o">=</span> <span class="p">[</span><span class="o">&amp;</span><span class="n">numbers</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">prime_indices</span><span class="p">](</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">is_prime</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">is_prime</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">assert</span><span class="p">(</span><span class="n">numbers</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">==</span> <span class="nb">true</span><span class="p">);</span>
</span><span class='line'>      <span class="n">assert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">find</span><span class="p">(</span><span class="n">prime_indices</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">prime_indices</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">n</span><span class="p">)</span> <span class="o">!=</span>
</span><span class='line'>             <span class="n">prime_indices</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">assert</span><span class="p">(</span><span class="n">numbers</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">==</span> <span class="nb">false</span><span class="p">);</span>
</span><span class='line'>      <span class="n">assert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">find</span><span class="p">(</span><span class="n">prime_indices</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">prime_indices</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">n</span><span class="p">)</span> <span class="o">==</span>
</span><span class='line'>             <span class="n">prime_indices</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">check_prime</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
</span><span class='line'>  <span class="n">check_prime</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
</span><span class='line'>  <span class="n">check_prime</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
</span><span class='line'>  <span class="n">check_prime</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
</span><span class='line'>  <span class="n">check_prime</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">CombinationIterator</span> <span class="p">{</span>
</span><span class='line'><span class="k">public</span><span class="o">:</span>
</span><span class='line'>  <span class="n">CombinationIterator</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">m</span><span class="p">)</span> <span class="o">:</span> <span class="n">n_</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">m_</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">comb_</span><span class="p">.</span><span class="n">reserve</span><span class="p">(</span><span class="n">m</span><span class="p">);</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">comb_</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">GetCombination</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">comb_</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">bool</span> <span class="n">Next</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// The last digit can go up to n, the next-to-last up to n-1, and</span>
</span><span class='line'>    <span class="c1">// so on. The very first sequence is {0, 1, ..., m-1}, and the</span>
</span><span class='line'>    <span class="c1">// very last is {n-m+1, ..., n-1, n}.</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">m_</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="n">n_</span> <span class="o">+</span> <span class="n">i</span> <span class="o">-</span> <span class="n">m_</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">val</span> <span class="o">=</span> <span class="n">comb_</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class='line'>      <span class="c1">// cout &lt;&lt; &quot;Debug: i = &quot; &lt;&lt; i &lt;&lt; &quot;, val = &quot; &lt;&lt; val &lt;&lt; &quot;, max = &quot; &lt;&lt; max &lt;&lt; endl;</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">&lt;</span> <span class="n">max</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">// Increment this position, and update subsequent indices if</span>
</span><span class='line'>        <span class="c1">// necessary.</span>
</span><span class='line'>        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m_</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">comb_</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="o">++</span><span class="n">val</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">// If we&#39;re at the beginning, we&#39;re done.</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">// Otherwise, fallthrough to the previous index.</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="n">assert</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span>  <span class="c1">// Should not reach here!</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="k">private</span><span class="o">:</span>
</span><span class='line'>  <span class="k">const</span> <span class="kt">int</span> <span class="n">n_</span><span class="p">,</span> <span class="n">m_</span><span class="p">;</span>
</span><span class='line'>  <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">comb_</span><span class="p">;</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">sanity_check_combinator</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">CombinationIterator</span> <span class="n">cit</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="n">v</span> <span class="o">=</span> <span class="n">cit</span><span class="p">.</span><span class="n">GetCombination</span><span class="p">();</span>
</span><span class='line'>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Debug (&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;) : &quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="nl">n</span> <span class="p">:</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">n</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;  &quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span><span class='line'>    <span class="n">assert</span><span class="p">(</span><span class="n">cit</span><span class="p">.</span><span class="n">Next</span><span class="p">());</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">enum</span> <span class="k">class</span> <span class="nc">Cardinality</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">Zero</span><span class="p">,</span> <span class="n">One</span><span class="p">,</span> <span class="n">More</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="n">Cardinality</span> <span class="nf">GetPrimeSum</span><span class="p">(</span><span class="kt">int</span> <span class="n">num_summands</span><span class="p">,</span>
</span><span class='line'>                        <span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;&amp;</span> <span class="n">numbers</span><span class="p">,</span>
</span><span class='line'>                        <span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">prime_indices</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// Try all possible combinations of adding prime numbers</span>
</span><span class='line'>  <span class="c1">// together. Either exhaust all combinations, in which case return</span>
</span><span class='line'>  <span class="c1">// Zero or One. The moment two are found, return More.</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">int</span> <span class="n">num_primes</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="n">CombinationIterator</span> <span class="n">cit</span><span class="p">(</span><span class="n">numbers</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">num_summands</span><span class="p">);</span>
</span><span class='line'>  <span class="k">do</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="n">pv</span> <span class="o">=</span> <span class="n">cit</span><span class="p">.</span><span class="n">GetCombination</span><span class="p">();</span>
</span><span class='line'>    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="nl">p</span> <span class="p">:</span> <span class="n">pv</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">sum</span> <span class="o">+=</span> <span class="n">p</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Check if the primes add up to a prime</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">sum</span> <span class="o">&lt;</span> <span class="n">numbers</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">numbers</span><span class="p">[</span><span class="n">sum</span><span class="p">])</span> <span class="p">{</span>
</span><span class='line'>      <span class="o">++</span><span class="n">num_primes</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">num_primes</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">Cardinality</span><span class="o">::</span><span class="n">More</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">cit</span><span class="p">.</span><span class="n">Next</span><span class="p">());</span>
</span><span class='line'>  <span class="n">assert</span><span class="p">(</span><span class="n">num_primes</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">num_primes</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="n">num_primes</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">Cardinality</span><span class="o">::</span><span class="n">One</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">Cardinality</span><span class="o">::</span><span class="n">Zero</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">,</span> <span class="k">const</span> <span class="n">Cardinality</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">underlying_type</span><span class="o">&lt;</span><span class="n">Cardinality</span><span class="o">&gt;::</span><span class="n">type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">os</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Euler #50 ... </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// Get the prime numbers upto 1 million</span>
</span><span class='line'>  <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">numbers</span><span class="p">(</span><span class="n">kMaxNum</span><span class="p">);</span>
</span><span class='line'>  <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">prime_indices</span><span class="p">;</span>
</span><span class='line'>  <span class="n">PopulatePrimes</span><span class="p">(</span><span class="o">&amp;</span><span class="n">numbers</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">prime_indices</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">sanity_check_primes</span><span class="p">(</span><span class="n">numbers</span><span class="p">,</span> <span class="n">prime_indices</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Debug: number of primes  = &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">prime_indices</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span><span class='line'>  <span class="n">sanity_check_combinator</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Debug : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">GetPrimeSum</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span> <span class="n">numbers</span><span class="p">,</span> <span class="n">prime_indices</span><span class="p">);</span>
</span><span class='line'>  <span class="c1">// TODO(agam): Uncomment and continue ...</span>
</span><span class='line'>  <span class="c1">// int left = 0;</span>
</span><span class='line'>  <span class="c1">// int right = 500;  /// random round number</span>
</span><span class='line'>  <span class="c1">// do {</span>
</span><span class='line'>  <span class="c1">//   Cardinality left_c = GetPrimeSum(left, numbers, prime_indices);</span>
</span><span class='line'>  <span class="c1">//   Cardinality right_c = GetPrimeSum(right, numbers, prime_indices);</span>
</span><span class='line'>  <span class="c1">// } while (left &lt; right);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-05-16T19:56:08-07:00" pubdate data-updated="true">May 16<sup>th</sup>, 2015</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/cpp/'>cpp</a>, <a class='category' href='/blog/categories/projecteuler/'>projecteuler</a>


</div>
	
</div>
</article>

<nav id="pagenavi">
    
        
            <a href="/posts//blog/page/2/" class="prev">Prev</a>
        
    
    
        <a href="/posts//blog/page/4/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2016

    Agam

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'agamamp';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//go.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-16612682-4']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>
