<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Octopress | Agam's Mashed-Up Pome]]></title>
  <link href="http://agam.github.io/blog/categories/octopress/atom.xml" rel="self"/>
  <link href="http://agam.github.io/"/>
  <updated>2014-03-31T10:48:03-07:00</updated>
  <id>http://agam.github.io/</id>
  <author>
    <name><![CDATA[Agam]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[The Octopress Revolution]]></title>
    <link href="http://agam.github.io/blog/2013/11/15/the-octopress-revolution/"/>
    <updated>2013-11-15T17:06:00-08:00</updated>
    <id>http://agam.github.io/blog/2013/11/15/the-octopress-revolution</id>
    <content type="html"><![CDATA[<p>Stumbled across Octopress and realized I could get a &ldquo;better minimalism&rdquo; with
it.</p>

<p>First, you have to get it.</p>

<p><code>bash
  $  git clone
  git://github.com/imathis/octopress.git
  octopress
</code></p>

<p>Then, you have to get a few dependencies.</p>

<p>```bash
$ ruby &mdash;version
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]</p>

<p>$ curl -L <a href="https://get.rvm.io">https://get.rvm.io</a> | bash -s stable &mdash;ruby
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
  Dload  Upload   Total   Spent    Left  Speed
  100   184  100   184    0     0    468      0
  &mdash;:&mdash;:&mdash; &mdash;:&mdash;:&mdash; &mdash;:&mdash;:&mdash;  1688
  100 19527  100 19527    0     0  37740      0
  &mdash;:&mdash;:&mdash; &mdash;:&mdash;:&mdash; &mdash;:&mdash;:&mdash; 37740
  Please read and follow further instructions.
  Downloading RVM branch stable
  &hellip;</p>

<p>  $ source /home/agam/.rvm/scripts/rvm</p>

<p>  $ rvm install 1.9.3</p>

<p>  $ rvm use 1.9.3</p>

<p>  $ rvm rubygems latest
```</p>

<p>(Note: <a href="http://rbenv.org/">rbenv</a> is an alternative to <a href="http://rvm.io/">rvm</a> above)</p>

<p>The next step is to set up some of the gems we downloaded.</p>

<p>```bash
  $  cd octopress</p>

<p>  $ gem install bundler
Fetching: bundler-1.3.5.gem (100%)
  Successfully installed bundler-1.3.5
  Installing ri documentation for bundler-1.3.5
  1 gem installed</p>

<p>  $ bundle install
  Fetching gem metadata from
  <a href="https://rubygems.org/.......">https://rubygems.org/.......</a>
  Fetching gem metadata from
  <a href="https://rubygems.org/..">https://rubygems.org/..</a>
  Installing rake (0.9.2.2)
  Installing RedCloth (4.2.9)
  Installing chunky_png (1.2.5)
  Installing fast-stemmer (1.0.1)
  Installing classifier (1.3.3)
  Installing fssm (0.2.9)
  Installing sass (3.2.9)
  Installing compass (0.12.2)
  Installing directory_watcher (1.4.1)
  Installing haml (3.1.7)
  Installing kramdown (0.13.8)
  Installing liquid (2.3.0)
  Installing syntax (1.0.0)
  Installing maruku (0.6.1)
  Installing posix-spawn (0.3.6)
  Installing yajl-ruby (1.1.0)
  Installing pygments.rb (0.3.4)
  Installing jekyll (0.12.0)
  Installing rack (1.5.2)
  Installing rack-protection (1.5.0)
  Installing rb-fsevent (0.9.1)
  Installing rdiscount (2.0.7.3)
  Installing rubypants (0.2.0)
  Installing sass-globbing (1.0.0)
  Installing tilt (1.3.7)
  Installing sinatra (1.4.2)
  Installing stringex (1.4.0)
Using bundler (1.3.5)
  Your bundle is complete!
  Use <code>bundle show [gemname]</code> to see where a
  bundled gem is installed.
```</p>

<p>Finally, we&rsquo;re ready to get a &ldquo;blank blog&rdquo; up and running</p>

<p>```bash
  $ rake install</p>

<h2>Copying classic theme into ./source and</h2>

<p>  ./sass
  mkdir -p source
  cp -r .themes/classic/source/. source
  mkdir -p sass
  cp -r .themes/classic/sass/. sass
  mkdir -p source/_posts
  mkdir -p public
```</p>

<p>I use Github Pages, but this setup works out of the box with Heroku (or just
plain rsync) too.</p>

<p><code>bash
  $ rake setup_github_pages
  Enter the read/write url for your repository
  (For example,
   'git@github.com:your_username/your_username.github.io.git)
  or
  'https://github.com/your_username/your_username.github.io')
  Repository url:
  https://github.com/agam/agam.github.com.git
  Added remote
  https://github.com/agam/agam.github.com.git
  as origin
  Set origin as default remote
  Master branch renamed to 'source'
  for committing your blog source
  files
  rm -rf _deploy
  mkdir _deploy
  cd _deploy
  Initialized empty Git repository
  in
  /home/agam/Documents/octopress/_deploy/.git/
  [master (root-commit) 5a90a3a]
  Octopress init
1 file changed, 1 insertion(+)
  create mode 100644 index.html
  cd -
</code></p>

<p>Take a look at what we made !</p>

<p>```bash
  $ rake generate</p>

<p>  $ rake preview
```</p>

<p>Push it out and call it a day &hellip;</p>

<p>```bash
  $ git add .</p>

<p>  $ git commit -m &lsquo;New (Empty) Blog&rsquo;</p>

<p>  $ git push origin source
```</p>

<h2>Migrating static content</h2>

<p>But wait, in my case, I also need to get all my old stuff over.</p>

<p><code>bash
  $ cp ../hakyll-source/posts/* source/_posts/
</code></p>

<p>But when I try to generate again &hellip; sadness</p>

<p><code>``bash
/usr/local/google/home/agam/Documents/octopress/plugins/pygments_code.rb:27:in
</code>rescue in pygments': Pygments can&rsquo;t parse unknown language: shell.
(RuntimeError)
from
/usr/local/google/home/agam/Documents/octopress/plugins/pygments_code.rb:24:in
<code>pygments'
from
/usr/local/google/home/agam/Documents/octopress/plugins/pygments_code.rb:14:in
</code>highlight'
from
/usr/local/google/home/agam/Documents/octopress/plugins/backtick_code_block.rb:37:in
<code>block in render_code_block'
from
/usr/local/google/home/agam/Documents/octopress/plugins/backtick_code_block.rb:13:in
</code>gsub'
from
/usr/local/google/home/agam/Documents/octopress/plugins/backtick_code_block.rb:13:in
<code>render_code_block'
from
/usr/local/google/home/agam/Documents/octopress/plugins/octopress_filters.rb:12:in
</code>pre_filter'
from
/usr/local/google/home/agam/Documents/octopress/plugins/octopress_filters.rb:28:in
<code>pre_render'
from
/usr/local/google/home/agam/Documents/octopress/plugins/post_filters.rb:112:in
</code>block in
pre_render'
from
/usr/local/google/home/agam/Documents/octopress/plugins/post_filters.rb:111:in
<code>each'
from
/usr/local/google/home/agam/Documents/octopress/plugins/post_filters.rb:111:in
</code>pre_render'
from
/usr/local/google/home/agam/Documents/octopress/plugins/post_filters.rb:166:in
<code>do_layout'
from
/usr/local/google/home/agam/.rvm/gems/ruby-1.9.3-p448/gems/jekyll-0.12.0/lib/jekyll/post.rb:195:in
</code>render'
from
/usr/local/google/home/agam/.rvm/gems/ruby-1.9.3-p448/gems/jekyll-0.12.0/lib/jekyll/site.rb:200:in
<code>block
in
render'
from
/usr/local/google/home/agam/.rvm/gems/ruby-1.9.3-p448/gems/jekyll-0.12.0/lib/jekyll/site.rb:199:in
</code>each'
from
/usr/local/google/home/agam/.rvm/gems/ruby-1.9.3-p448/gems/jekyll-0.12.0/lib/jekyll/site.rb:199:in
<code>render'
from
/usr/local/google/home/agam/.rvm/gems/ruby-1.9.3-p448/gems/jekyll-0.12.0/lib/jekyll/site.rb:41:in
</code>process'
from
/usr/local/google/home/agam/.rvm/gems/ruby-1.9.3-p448/gems/jekyll-0.12.0/bin/jekyll:264:in
<code>&lt;top
(required)&gt;'
from
/usr/local/google/home/agam/.rvm/gems/ruby-1.9.3-p448/bin/jekyll:23:in
</code>load'
from
/usr/local/google/home/agam/.rvm/gems/ruby-1.9.3-p448/bin/jekyll:23:in
<code>&lt;main&gt;'
from
  /usr/local/google/home/agam/.rvm/gems/ruby-1.9.3-p448/bin/ruby_executable_hooks:15:in
 </code>eval'
  from
  /usr/local/google/home/agam/.rvm/gems/ruby-1.9.3-p448/bin/ruby_executable_hooks:15:in
  `<main>'</p>

<p>```</p>

<p><a href="https://plus.google.com/photos?pid=5946667874240500674&amp;oid=116824588290880385608">Nothing to panic</a> about, turns out I just had to use different names for the
<a href="http://pygments.org/docs/lexers/">Lexers in Pygments</a>. So it&rsquo;s &ldquo;sh&rdquo; or &ldquo;bash&rdquo;
instead of &ldquo;shell&rdquo;, and &ldquo;haskell&rdquo; instead of &ldquo;Haskell&rdquo;.</p>

<p>Also, I had to make other cosmetic changes like
&ndash; changing the title to be in the <em>yyyy-mm-dd-title</em> format
&ndash; added quotes around the &lsquo;title&rsquo; in the header metadata
&ndash; added categories (retroactively) for each post</p>

<h2>Sorting out the old repo</h2>

<p>Almost there, but not there yet. Running <code>rake deploy</code> doesn&rsquo;t work out of the
box:</p>

<p><code>sh
 ! [rejected]        master -&gt; master (non-fast-forward)
 error: failed to push some refs to
 'https://github.com/agam/agam.github.com.git'
 hint: Updates were rejected because the tip of your current branch is behind
 hint: its remote counterpart. Integrate the remote changes (e.g.
 hint: 'git pull ...') before pushing again.
 hint: See the 'Note about fast-forwards' in 'git push --help' for details.
</code></p>

<p>Ah what the hell, its just a static blog repo! I deleted the old repo, created a
new repo, ran <code>rake setup_github_pages</code> again, and this time <code>rake deploy</code>
worked flawlessly.</p>

<p>```sh</p>

<h2>Pushing generated _deploy website</h2>

<p>Username for &lsquo;<a href="https://github.com">https://github.com</a>&rsquo;: agam
Password for &lsquo;<a href="https://agam@github.com">https://agam@github.com</a>&rsquo;:
Counting objects: 262, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (217/217), done.
Writing objects: 100% (262/262), 677.07 KiB | 0 bytes/s, done.
Total 262 (delta 59), reused 0 (delta 0)
To <a href="https://github.com/agam/agam.github.io.git">https://github.com/agam/agam.github.io.git</a>
 * [new branch]      master &ndash;> master</p>

<p> ## Github Pages deploy complete
 cd &ndash;
```</p>

<p>BTW if you do this you might also need to recreate the <code>source</code> remote branch,
e.g. in my case</p>

<p><code>sh
agam@terminus:~/Documents/octopress$ git remote set-url origin
https://github.com/agam/agam.github.io.git
agam@terminus:~/Documents/octopress$ git push origin source
Username for 'https://github.com': agam
Password for 'https://agam@github.com':
Counting objects: 4975, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (2173/2173), done.
Writing objects: 100% (4975/4975), 1.56 MiB | 816.00 KiB/s, done.
Total 4975 (delta 2611), reused 4694 (delta 2428)
To https://github.com/agam/agam.github.io.git
 * [new branch]      source -&gt; source
</code></p>

<p>Finally, keep in mind that <code>rake deploy</code> only updates the generated content. You
obviously also want to version your posts in markdown format (along with any
images etc that you might be hosting too), so every once in a while,</p>

<p><code>sh
git commit -a -m 'sync to latest post'
git push origin source
</code></p>

<p>(you might want to replace that with a more descriptive message !)</p>

<p>So that&rsquo;s that. If you use git or write code setting this up is pretty easy, and
as you can see, it&rsquo;s not too bad to look at either!</p>
]]></content>
  </entry>
  
</feed>
